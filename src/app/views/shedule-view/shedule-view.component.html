<div class="container animated fadeIn">
    <mat-card class="mat-elevation-z4">
        <mat-card-title>
            Gestion de turnos
        </mat-card-title>
        <br>

        <mat-card-content>
            <form [formGroup]="registerSheduleForm" (ngSubmit)="saveShedule()">
                <div fxLayout="row" fxLayoutGap="25px">
                    <mat-form-field appearance="fill" fxFlex="25"
                        [class.mat-form-field-invalid]="hasErrors && registerSheduleForm.get('firstName')?.invalid">
                        <mat-label>Código</mat-label>
                        <mat-select formControlName="employeeCode" required
                            (selectionChange)="getEmployeeSelected($event)">
                            <mat-option [value]="item.code" *ngFor="let item of employees">{{item.code}}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="fill" fxFlex="25">
                        <mat-label>Primer nombre</mat-label>
                        <input matInput formControlName="firstName">
                    </mat-form-field>

                    <mat-form-field appearance="fill" fxFlex="25">
                        <mat-label>Primer apellido</mat-label>
                        <input matInput formControlName="firstLastname">
                    </mat-form-field>

                    <mat-form-field appearance="fill" fxFlex="25">
                        <mat-label>Categoría</mat-label>
                        <mat-select formControlName="category" required>
                            <mat-option *ngFor="let item of categoriesList" [value]="item._id">
                                {{ item.name}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div fxLayout="row" fxLayoutGap="25px">
                    <mat-form-field appearance="fill" fxFlex="33"
                        [class.mat-form-field-invalid]="hasErrors && registerSheduleForm.get('date')?.invalid">
                        <mat-label>Fecha de turno</mat-label>
                        <mat-date-range-input [rangePicker]="picker">
                            <input matStartDate placeholder="Start date" formControlName="date" [min]="now"
                                (click)="picker.open()" required>
                            <input matEndDate placeholder="End date" formControlName="date" [min]="now"
                                (click)="picker.open()" required>
                        </mat-date-range-input>
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-date-range-picker #picker></mat-date-range-picker>
                    </mat-form-field>

                    <mat-form-field appearance="fill" fxFlex="33"
                        [class.mat-form-field-invalid]="hasErrors && registerSheduleForm.get('type')?.invalid">
                        <mat-label>Tipo turno</mat-label>
                        <mat-select formControlName="type" (selectionChange)="setHours($event)" required>
                            <mat-option [value]="item._id" *ngFor="let item of turns">{{ item.name }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="fill" fxFlex="33"
                        [class.mat-form-field-invalid]="hasErrors && registerSheduleForm.get('hours')?.invalid">
                        <mat-label>Horario</mat-label>
                        <input matInput formControlName="hours" required>
                    </mat-form-field>
                </div>

                <div fxLayout="row" fxLayoutGap="25px" fxLayoutAlign="end end">
                    <button appHtt mat-raised-button color="primary" type="submit">
                        Aceptar
                    </button>

                    <button appHtt mat-raised-button type="button" (click)="buildForm()">
                        Limpiar
                    </button>
                </div>
            </form>
        </mat-card-content>
    </mat-card>
</div>